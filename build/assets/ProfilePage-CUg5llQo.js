import{c as P,j as e,C as y,e as S,O as R,Q as U,V as O,B as f,r as x,q as A,u as $,m as V,P as B,o as Y,D,h as _,W as K,Y as W,L as j,Z as Q,t as C,_ as X,S as Z,b as M}from"./index-CRIiYYAI.js";import{C as G,F as J}from"./FriendList-DV1m0YIS.js";import{u as ee}from"./select-DOzGwCYW.js";import"./dollar-sign-CfMDbIwx.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],te=P("log-out",se);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],re=P("message-square",ae);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],ne=P("smartphone",ie);function ce({user:s,onLogout:i}){return e.jsx(y,{className:"border border-gray-200 shadow-sm",children:e.jsxs(S,{className:"p-8",children:[e.jsx("div",{className:"flex items-start justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-4 bg-emerald-100 rounded-full",children:e.jsx(G,{className:"h-12 w-12 text-emerald-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl mb-1",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["@",s.username]})]})]})}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx(R,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Email"}),e.jsx("p",{className:"text-sm",children:s.email})]})]}),s.phone&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx(U,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Phone"}),e.jsx("p",{className:"text-sm",children:s.phone})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx(O,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Username"}),e.jsxs("p",{className:"text-sm",children:["@",s.username]})]})]})]}),e.jsxs(f,{variant:"outline",className:"w-full rounded-full border-red-300 text-red-600 hover:bg-red-50 hover:text-red-700 hover:border-red-400",onClick:i,children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Logout"]})]})})}var v="Switch",[le]=V(v),[de,oe]=le(v),F=x.forwardRef((s,i)=>{const{__scopeSwitch:t,name:l,checked:n,defaultChecked:d,required:c,disabled:h,value:m="on",onCheckedChange:o,form:a,...p}=s,[r,u]=x.useState(null),w=A(i,b=>u(b)),k=x.useRef(!1),E=r?a||!!r.closest("form"):!0,[g,L]=$({prop:n,defaultProp:d??!1,onChange:o,caller:v});return e.jsxs(de,{scope:t,checked:g,disabled:h,children:[e.jsx(B.button,{type:"button",role:"switch","aria-checked":g,"aria-required":c,"data-state":q(g),"data-disabled":h?"":void 0,disabled:h,value:m,...p,ref:w,onClick:Y(s.onClick,b=>{L(z=>!z),E&&(k.current=b.isPropagationStopped(),k.current||b.stopPropagation())})}),E&&e.jsx(I,{control:r,bubbles:!k.current,name:l,value:m,checked:g,required:c,disabled:h,form:a,style:{transform:"translateX(-100%)"}})]})});F.displayName=v;var T="SwitchThumb",H=x.forwardRef((s,i)=>{const{__scopeSwitch:t,...l}=s,n=oe(T,t);return e.jsx(B.span,{"data-state":q(n.checked),"data-disabled":n.disabled?"":void 0,...l,ref:i})});H.displayName=T;var he="SwitchBubbleInput",I=x.forwardRef(({__scopeSwitch:s,control:i,checked:t,bubbles:l=!0,...n},d)=>{const c=x.useRef(null),h=A(c,d),m=ee(t),o=D(i);return x.useEffect(()=>{const a=c.current;if(!a)return;const p=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(p,"checked").set;if(m!==t&&u){const w=new Event("click",{bubbles:l});u.call(a,t),a.dispatchEvent(w)}},[m,t,l]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...n,tabIndex:-1,ref:h,style:{...n.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});I.displayName=he;function q(s){return s?"checked":"unchecked"}var xe=F,me=H;function N({className:s,...i}){return e.jsx(xe,{"data-slot":"switch",className:_("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...i,children:e.jsx(me,{"data-slot":"switch-thumb",className:_("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function ue({userId:s,onSave:i}){const[t,l]=x.useState({...K,userId:s}),[n,d]=x.useState("default");x.useEffect(()=>{"Notification"in window&&d(Notification.permission)},[]);const c=o=>{l(a=>({...a,[o]:!a[o]}))},h=async()=>{const o=await Q.requestPermission();d(o),o==="granted"?(C.success("Push notifications enabled!"),l(a=>({...a,pushEnabled:!0}))):(C.error("Push notifications denied"),l(a=>({...a,pushEnabled:!1})))},m=()=>{X.setUserPreferences(s,t),i?.(t),C.success("Notification preferences saved!")};return e.jsx(y,{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Notification Preferences"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Choose how you want to receive notifications"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-emerald-500/10 flex items-center justify-center",children:e.jsx(W,{className:"w-5 h-5 text-emerald-600"})}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"in-app",className:"text-sm font-medium cursor-pointer",children:"In-App Notifications"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Show notifications within the app"})]})]}),e.jsx(N,{id:"in-app",checked:t.inAppEnabled,onCheckedChange:()=>c("inAppEnabled")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/10 flex items-center justify-center",children:e.jsx(ne,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"push",className:"text-sm font-medium cursor-pointer",children:"Push Notifications"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Browser push notifications",n==="denied"&&" (blocked by browser)"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[n==="default"&&e.jsx(f,{size:"sm",variant:"outline",onClick:h,children:"Enable"}),n==="granted"&&e.jsx(N,{id:"push",checked:t.pushEnabled,onCheckedChange:()=>c("pushEnabled")}),n==="denied"&&e.jsx("span",{className:"text-xs text-red-500",children:"Blocked"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-500/10 flex items-center justify-center",children:e.jsx(R,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"email",className:"text-sm font-medium cursor-pointer",children:"Email Notifications"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Send important updates via email"})]})]}),e.jsx(N,{id:"email",checked:t.emailEnabled,onCheckedChange:()=>c("emailEnabled")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-500/10 flex items-center justify-center",children:e.jsx(re,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"sms",className:"text-sm font-medium cursor-pointer",children:"SMS Notifications"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Urgent alerts via text message"})]})]}),e.jsx(N,{id:"sms",checked:t.smsEnabled,onCheckedChange:()=>c("smsEnabled")})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsx(f,{onClick:m,className:"w-full",children:"Save Preferences"})}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/20 p-4 rounded-lg",children:e.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:[e.jsx("strong",{children:"Note:"})," High priority notifications may still be sent through multiple channels regardless of your preferences to ensure important updates reach you."]})})]})})}function je({user:s,friends:i,loading:t,onLogout:l,onSettle:n}){const d=Array.isArray(i)?i:[],c=d.length,h=d.reduce((r,u)=>r+Math.max(u.balance,0),0),m=d.reduce((r,u)=>r+Math.max(-u.balance,0),0),o=c-d.filter(r=>r.balance!==0).length,a=s?.name?.split(" ")[0]||s.username,p=[{label:"Friends",value:c.toString(),hint:"Across crews"},{label:"They owe you",value:`৳${h.toFixed(0)}`,hint:"Positive balances"},{label:"You owe",value:`৳${m.toFixed(0)}`,hint:"Settle this week"}];return e.jsxs("div",{className:"max-w-7xl mx-auto space-y-10 pb-16",children:[e.jsx("section",{className:"rounded-[36px] bg-gradient-to-br from-gray-900 via-emerald-900 to-gray-900 p-10 text-white",children:e.jsxs("div",{className:"flex flex-col gap-8 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm uppercase tracking-[0.5em] text-emerald-200",children:[e.jsx(Z,{className:"h-4 w-4"})," Profile hub"]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl lg:text-5xl font-semibold",children:["Hi ",a,", keep the network warm"]}),e.jsx("p",{className:"mt-3 text-white/70 max-w-2xl",children:"Review your identity, tweak notifications, and see who needs a nudge before month close."})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(f,{className:"rounded-full bg-white text-gray-900 hover:bg-white/90",onClick:l,children:"Sign out everywhere"}),e.jsx(f,{variant:"secondary",className:"rounded-full border-white/40 text-white hover:bg-white/10",onClick:()=>{typeof navigator<"u"&&navigator.clipboard&&navigator.clipboard.writeText(s.username)},children:"Copy @handle"})]})]}),e.jsx("div",{className:"grid w-full max-w-sm gap-4 sm:grid-cols-3 lg:grid-cols-1",children:p.map(r=>e.jsxs("div",{className:"rounded-2xl border border-white/15 bg-white/10 p-4 backdrop-blur",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-white/70",children:r.label}),e.jsx("p",{className:"mt-3 text-3xl font-semibold",children:r.value}),e.jsx("p",{className:"text-xs text-white/60 mt-1",children:r.hint})]},r.label))})]})}),e.jsxs("section",{className:"grid gap-6 lg:grid-cols-[1.15fr_0.85fr]",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(ce,{user:s,onLogout:l}),e.jsxs(y,{className:"border border-gray-200 shadow-sm",children:[e.jsx(M,{children:e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-gray-500",children:"Personal rituals"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Keep the account healthy"})]})}),e.jsxs(S,{className:"space-y-3 text-sm text-gray-600",children:[e.jsx("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:"Archive receipts weekly to keep AI insights sharp."}),e.jsx("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:"Settle any friend where |balance| ≥ ৳2K using the quick settle action."}),e.jsx("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:"Review notification stack monthly."})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(ue,{userId:s.id}),e.jsxs(y,{className:"border border-gray-200 shadow-sm",children:[e.jsx(M,{children:e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-gray-500",children:"Friend ledger"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"My friends"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[c," connections • ",o," settled"]})]})}),e.jsx(S,{children:t?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading friends..."}):e.jsx(J,{friends:d,onSettle:n})})]})]})]})]})}export{je as ProfilePage};
