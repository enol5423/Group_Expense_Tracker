import{c as L,j as e,C as i,a as n,R as T,U as D,r as x,S as F,B as b,i as $,I as U,X as I}from"./index-DwQK3muS.js";import{R as M}from"./refresh-cw-DjeXkFMi.js";import{C as O}from"./clock-B0-LGOy4.js";import{T as Y}from"./trending-up-CoufMA-n.js";import{T as q}from"./trending-down-C7cEpkby.js";import{C as E}from"./calendar-CHSlFlq8.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],P=L("funnel",H);function Q({activities:d,onGroupClick:u}){if(d.length===0)return e.jsx(i,{className:"border border-gray-200 shadow-sm",children:e.jsxs(n,{className:"p-12 text-center",children:[e.jsx(T,{className:"mx-auto h-12 w-12 mb-4 text-gray-300"}),e.jsx("p",{className:"text-gray-600",children:"No activity yet"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Start adding expenses to see them here!"})]})});const y=t=>{const m=new Date(t),j=new Date().getTime()-m.getTime(),l=Math.floor(j/(1e3*60*60*24));return l===0?"Today":l===1?"Yesterday":l<7?`${l} days ago`:m.toLocaleDateString()};return e.jsx(i,{className:"border border-gray-200 shadow-sm",children:e.jsxs(n,{className:"p-6",children:[e.jsx("h3",{className:"font-medium mb-4",children:"Recent Transactions"}),e.jsx("div",{className:"space-y-3",children:d.map(t=>e.jsxs("div",{className:`flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors ${u?"cursor-pointer":""}`,onClick:()=>u?.(t.groupId),children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:"p-2 rounded-lg bg-white border border-gray-200",children:e.jsx(T,{className:"h-5 w-5 text-gray-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(D,{className:"h-3 w-3"}),t.groupName]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["By ",t.paidBy]})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:y(t.createdAt)})]})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["৳",t.amount.toFixed(2)]}),e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs bg-gray-200 text-gray-700",children:[t.involvedUsers," people"]})]})]},t.id))})]})})}function K({activityData:d,loading:u,onGroupClick:y}){const[t,m]=x.useState(""),[c,j]=x.useState("all"),[l,S]=x.useState("all"),[w,R]=x.useState(!1),a={totalBalance:d?.totalBalance??0,totalOwed:d?.totalOwed??0,totalReceiving:d?.totalReceiving??0,activities:d?.activities??[]},v=x.useMemo(()=>{let s=[...a.activities];if(t){const r=t.toLowerCase();s=s.filter(o=>o.description?.toLowerCase().includes(r)||o.groupName?.toLowerCase().includes(r)||o.category?.toLowerCase().includes(r))}if(c!=="all"&&(s=s.filter(r=>c==="expenses"?r.type==="expense"||!r.type:c==="payments"?r.type==="payment":c==="groups"?r.groupId:!0)),l!=="all"){const r=new Date,C={today:1,week:7,month:30,all:1/0}[l],f=new Date(r.getTime()-C*24*60*60*1e3);s=s.filter(A=>new Date(A.createdAt)>=f)}return s},[a.activities,t,c,l]),N=x.useMemo(()=>{const s=new Date;s.setHours(0,0,0,0);const r=new Date(s.getTime()-10080*60*1e3),o=a.activities.filter(g=>new Date(g.createdAt)>=s).length,C=a.activities.filter(g=>new Date(g.createdAt)>=r).length,f=a.activities.reduce((g,B)=>g+(B.amount||0),0),A=a.activities.length>0?f/a.activities.length:0;return{todayCount:o,weekCount:C,totalSpent:f,avgAmount:A}},[a.activities]),h=s=>`৳${(s??0).toLocaleString("en-US",{maximumFractionDigits:0})}`,k=()=>{m(""),j("all"),S("all")},p=t||c!=="all"||l!=="all";return e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8 pb-16",children:[e.jsx("section",{className:"rounded-[32px] bg-gradient-to-br from-indigo-900 via-purple-900 to-slate-900 p-8 text-white",children:e.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row lg:items-start lg:justify-between",children:[e.jsxs("div",{className:"space-y-4 flex-1",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-white/20 px-4 py-1.5 text-xs uppercase tracking-[0.3em] text-white/70",children:[e.jsx(F,{className:"h-3.5 w-3.5"}),"Activity Timeline"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl lg:text-4xl font-bold",children:"Transaction History"}),e.jsx("p",{className:"mt-2 text-white/60 max-w-xl",children:"Every expense, payment, and settlement in one place. Search, filter, and track your financial journey."})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs(b,{className:"rounded-full bg-white text-gray-900 hover:bg-white/90",onClick:()=>window.location.reload(),children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),"Refresh"]}),e.jsxs(b,{variant:"outline",className:"rounded-full border-white/30 text-white hover:bg-white/10",children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 w-full max-w-sm",children:[e.jsxs("div",{className:"rounded-xl bg-white/10 border border-white/10 p-4",children:[e.jsx("p",{className:"text-xs text-white/50 uppercase",children:"Today"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:N.todayCount}),e.jsx("p",{className:"text-xs text-white/50",children:"transactions"})]}),e.jsxs("div",{className:"rounded-xl bg-white/10 border border-white/10 p-4",children:[e.jsx("p",{className:"text-xs text-white/50 uppercase",children:"This Week"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:N.weekCount}),e.jsx("p",{className:"text-xs text-white/50",children:"transactions"})]}),e.jsxs("div",{className:"rounded-xl bg-white/10 border border-white/10 p-4",children:[e.jsx("p",{className:"text-xs text-white/50 uppercase",children:"Total Volume"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:h(N.totalSpent)})]}),e.jsxs("div",{className:"rounded-xl bg-white/10 border border-white/10 p-4",children:[e.jsx("p",{className:"text-xs text-white/50 uppercase",children:"Avg. Amount"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:h(N.avgAmount)})]})]})]})}),e.jsxs("section",{className:"grid gap-4 md:grid-cols-3",children:[e.jsx(i,{className:`rounded-2xl border-2 ${a.totalBalance>=0?"border-emerald-200 bg-emerald-50":"border-red-200 bg-red-50"}`,children:e.jsx(n,{className:"p-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Net Position"}),e.jsx("p",{className:`text-3xl font-bold mt-1 ${a.totalBalance>=0?"text-emerald-600":"text-red-600"}`,children:h(a.totalBalance)}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:a.totalBalance>=0?"You're in the green!":"Time to settle up"})]}),a.totalBalance>=0?e.jsx(Y,{className:"h-10 w-10 text-emerald-400"}):e.jsx(q,{className:"h-10 w-10 text-red-400"})]})})}),e.jsx(i,{className:"rounded-2xl border border-emerald-200 bg-gradient-to-br from-emerald-50 to-white",children:e.jsx(n,{className:"p-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"You Are Owed"}),e.jsx("p",{className:"text-3xl font-bold mt-1 text-emerald-600",children:h(a.totalReceiving)}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Pending from friends"})]}),e.jsx("div",{className:"p-3 rounded-full bg-emerald-100",children:e.jsx(T,{className:"h-6 w-6 text-emerald-600"})})]})})}),e.jsx(i,{className:"rounded-2xl border border-amber-200 bg-gradient-to-br from-amber-50 to-white",children:e.jsx(n,{className:"p-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"You Owe"}),e.jsx("p",{className:"text-3xl font-bold mt-1 text-amber-600",children:h(a.totalOwed)}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Across all groups"})]}),e.jsx("div",{className:"p-3 rounded-full bg-amber-100",children:e.jsx(D,{className:"h-6 w-6 text-amber-600"})})]})})})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx($,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(U,{placeholder:"Search transactions...",value:t,onChange:s=>m(s.target.value),className:"pl-11 h-12 rounded-xl border-gray-200"})]}),e.jsxs(b,{variant:"outline",className:`rounded-xl h-12 px-6 ${w?"border-emerald-500 text-emerald-600":""}`,onClick:()=>R(!w),children:[e.jsx(P,{className:"mr-2 h-4 w-4"}),"Filters",p&&e.jsx("span",{className:"ml-2 px-2 py-0.5 bg-emerald-100 text-emerald-700 text-xs rounded-full",children:"Active"})]})]}),w&&e.jsx(i,{className:"rounded-xl border border-gray-200",children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase",children:"Type"}),e.jsx("div",{className:"flex gap-2",children:["all","expenses","payments","groups"].map(s=>e.jsx("button",{onClick:()=>j(s),className:`px-3 py-1.5 rounded-lg text-sm transition-all ${c===s?"bg-emerald-100 text-emerald-700 font-medium":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:s.charAt(0).toUpperCase()+s.slice(1)},s))})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase",children:"Time Range"}),e.jsx("div",{className:"flex gap-2",children:["today","week","month","all"].map(s=>e.jsx("button",{onClick:()=>S(s),className:`px-3 py-1.5 rounded-lg text-sm transition-all ${l===s?"bg-emerald-100 text-emerald-700 font-medium":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:s==="all"?"All Time":s.charAt(0).toUpperCase()+s.slice(1)},s))})]}),p&&e.jsxs("button",{onClick:k,className:"ml-auto flex items-center gap-1 text-sm text-gray-500 hover:text-gray-700",children:[e.jsx(I,{className:"h-4 w-4"}),"Clear all"]})]})})})]}),u?e.jsx(i,{className:"rounded-2xl border border-gray-200",children:e.jsxs(n,{className:"py-16 text-center text-gray-500",children:[e.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-emerald-500 border-t-transparent rounded-full mx-auto mb-4"}),"Loading activity..."]})}):v.length===0?e.jsx(i,{className:"rounded-2xl border border-dashed border-gray-300",children:e.jsxs(n,{className:"py-16 text-center",children:[e.jsx(E,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:p?"No matching transactions":"No activity yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:p?"Try adjusting your filters or search query":"Start by adding expenses or creating a group"}),p&&e.jsx(b,{variant:"outline",onClick:k,children:"Clear filters"})]})}):e.jsx(i,{className:"rounded-2xl border border-gray-200 shadow-sm",children:e.jsxs(n,{className:"p-0",children:[e.jsx("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"All Transactions"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[v.length," results"]})]})}),e.jsx("div",{className:"p-4",children:e.jsx(Q,{activities:v,onGroupClick:y})})]})})]})}export{K as ActivityPage};
