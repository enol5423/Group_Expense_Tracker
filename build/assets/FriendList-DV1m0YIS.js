import{c as F,r as l,j as e,B as N,L as v,I as C,C as o,e as h}from"./index-CRIiYYAI.js";import{D as f,j as M,a as O,b as k,c as A,d as I,S as L,e as R,f as T,g as Y,h as n}from"./select-DOzGwCYW.js";import{D as m}from"./dollar-sign-CfMDbIwx.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M18 20a6 6 0 0 0-12 0",key:"1qehca"}],["circle",{cx:"12",cy:"10",r:"4",key:"1h16sb"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],w=F("circle-user-round",B);function E({friend:a,onSettle:i}){const[r,c]=l.useState(!1),[s,t]=l.useState(Math.abs(a.balance).toFixed(2)),[j,S]=l.useState("cash"),[u,p]=l.useState(!1),[g,b]=l.useState(""),y=a.balance<0,D=async x=>{x.preventDefault(),p(!0),b("");try{const d=y?parseFloat(s):-parseFloat(s);await i(a.id,d,j),c(!1)}catch(d){b(d.message||"Failed to settle debt")}finally{p(!1)}};return e.jsxs(f,{open:r,onOpenChange:c,children:[e.jsx(M,{asChild:!0,children:e.jsxs(N,{variant:"outline",size:"sm",children:[e.jsx(m,{className:"h-4 w-4 mr-1"}),"Settle"]})}),e.jsxs(O,{children:[e.jsxs(k,{children:[e.jsxs(A,{children:["Settle Debt with ",a.name]}),e.jsx(I,{children:"Record a payment to settle your balance with this friend."})]}),e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:y?e.jsxs("p",{className:"text-sm",children:["You owe ",e.jsxs("span",{className:"text-red-600",children:["৳",Math.abs(a.balance).toFixed(2)]})]}):e.jsxs("p",{className:"text-sm",children:[a.name," owes you ",e.jsxs("span",{className:"text-green-600",children:["৳",Math.abs(a.balance).toFixed(2)]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"amount",children:"Amount ($)"}),e.jsx(C,{id:"amount",type:"number",step:"0.01",min:"0.01",max:Math.abs(a.balance),value:s,onChange:x=>t(x.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"method",children:"Payment Method"}),e.jsxs(L,{value:j,onValueChange:S,children:[e.jsx(R,{children:e.jsx(T,{})}),e.jsxs(Y,{children:[e.jsx(n,{value:"cash",children:"Cash"}),e.jsx(n,{value:"upi",children:"UPI"}),e.jsx(n,{value:"bank_transfer",children:"Bank Transfer"}),e.jsx(n,{value:"simplify",children:"Simplify (Auto-balance)"})]})]})]}),g&&e.jsx("div",{className:"text-red-500 text-sm",children:g}),e.jsx(N,{type:"submit",className:"w-full",disabled:u,children:u?"Settling...":"Record Settlement"})]})]})]})}function U({friends:a,onSettle:i}){if(a.length===0)return e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(w,{className:"mx-auto h-12 w-12 mb-4 opacity-50"}),e.jsx("p",{children:"No friends yet. Add friends to start splitting expenses!"})]});const r=a.reduce((s,t)=>t.balance<0?s+Math.abs(t.balance):s,0),c=a.reduce((s,t)=>t.balance>0?s+t.balance:s,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsx(o,{children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"You Owe"}),e.jsxs("p",{className:"text-red-600 text-2xl",children:["৳",r.toFixed(2)]})]}),e.jsx(m,{className:"h-8 w-8 text-red-600 opacity-50"})]})})}),e.jsx(o,{children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Owe You"}),e.jsxs("p",{className:"text-green-600 text-2xl",children:["৳",c.toFixed(2)]})]}),e.jsx(m,{className:"h-8 w-8 text-green-600 opacity-50"})]})})})]}),e.jsx("div",{className:"space-y-3",children:a.map(s=>e.jsx(o,{children:e.jsxs(h,{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(w,{className:"h-10 w-10 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{children:s.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["@",s.username]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[s.balance!==0&&e.jsx("div",{className:"text-right",children:s.balance>0?e.jsxs("p",{className:"text-green-600",children:["Owes you ৳",Math.abs(s.balance).toFixed(2)]}):e.jsxs("p",{className:"text-red-600",children:["You owe ৳",Math.abs(s.balance).toFixed(2)]})}),s.balance!==0&&e.jsx(E,{friend:s,onSettle:i})]})]})},s.id))})]})}export{w as C,U as F};
