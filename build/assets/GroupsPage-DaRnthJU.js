import{c as ee,j as e,U as J,C as ae,e as re,f as Z,r as i,B as T,y as Be,I as K,z as wt,m as Oe,p as kt,P as Y,u as qe,q as X,o as W,D as $e,h as Q,E as St,v as Ct,F as Ve,X as At,L as H,T as Ge,G as Dt,H as Et,J as he,b as ue,d as ge}from"./index-CRIiYYAI.js";import{D as ne,j as de,a as oe,b as Ce,c as ie,d as ce,u as He,i as Pt,S as pe,e as fe,f as be,g as je,h as q}from"./select-DOzGwCYW.js";import{P as ye,T as Ke,A as Mt,a as Rt,b as _t,c as Bt,d as Tt,e as Ft,f as It,g as zt,h as Lt}from"./textarea-Dl408mrp.js";import{e as Ot,g as Te}from"./ExpenseCategories-DZnYnuOl.js";import{D as qt}from"./dollar-sign-CfMDbIwx.js";import{T as $t}from"./trending-up-BAi8RDrt.js";import{T as Vt}from"./triangle-alert-CYnw1tlq.js";import{D as Gt}from"./download-4AW0JUmb.js";import{A as Ht}from"./AddFriendDialog-C07YOjSs.js";import"./utensils-9D_zl73m.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Fe=ee("calculator",Kt);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],ve=ee("calendar-days",Wt);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Yt=ee("circle-check-big",Ut);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Ie=ee("crown",Xt);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],We=ee("percent",Jt);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]],Ne=ee("scale",Qt);function Zt({groups:t,onSelectGroup:a}){return t.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"inline-flex p-8 rounded-full bg-gradient-to-br from-emerald-100 to-teal-200 dark:from-emerald-900 dark:to-teal-800 mb-6 shadow-lg",children:e.jsx(J,{className:"h-16 w-16 text-emerald-600 dark:text-emerald-400"})}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No groups yet"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Create your first group to start splitting expenses!"}),e.jsxs("div",{className:"max-w-md mx-auto bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 rounded-2xl p-6 shadow-xl border border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"font-semibold mb-3 text-emerald-600 dark:text-emerald-400",children:"Getting Started"}),e.jsxs("div",{className:"text-left space-y-3 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-emerald-500 text-white flex items-center justify-center text-xs",children:"1"}),e.jsx("p",{children:'Click "Add Friend" to add friends to your network'})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-teal-500 text-white flex items-center justify-center text-xs",children:"2"}),e.jsx("p",{children:'Click "Create Group" to start a new expense group'})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-blue-500 text-white flex items-center justify-center text-xs",children:"3"}),e.jsx("p",{children:"Add members and start tracking shared expenses!"})]})]})]})]}):e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:t.map((r,l)=>e.jsxs(ae,{className:"cursor-pointer card-hover border-0 shadow-xl bg-white overflow-hidden relative group",onClick:()=>a(r.id),children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-emerald-500/10 to-teal-500/10 rounded-full -mr-16 -mt-16 group-hover:scale-150 transition-transform duration-500"}),e.jsxs(re,{className:"p-6 relative z-10",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsx("div",{className:`p-3 rounded-2xl bg-gradient-to-br ${l%3===0?"from-emerald-500 to-teal-600":l%3===1?"from-blue-500 to-indigo-600":"from-purple-500 to-pink-600"} shadow-lg`,children:e.jsx(J,{className:"h-6 w-6 text-white"})})}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:r.name}),r.description&&e.jsx("p",{className:"text-muted-foreground text-sm mb-4 line-clamp-2",children:r.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx("div",{className:"p-1.5 rounded-lg bg-emerald-100 dark:bg-emerald-900/30",children:e.jsx(J,{className:"h-4 w-4 text-emerald-600 dark:text-emerald-400"})}),e.jsx("span",{className:"font-medium",children:r.memberCount})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx("div",{className:"p-1.5 rounded-lg bg-blue-100 dark:bg-blue-900/30",children:e.jsx(Z,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),e.jsx("span",{className:"font-medium",children:r.expenseCount})]})]})]})]},r.id))})}function es({friends:t,existingMemberIds:a,onAddMember:r}){const[l,n]=i.useState(!1),[d,c]=i.useState(!1),[m,g]=i.useState(""),k=t.filter(u=>!a.includes(u.id)),b=k.filter(u=>u.name.toLowerCase().includes(m.toLowerCase())||u.username.toLowerCase().includes(m.toLowerCase())||u.email.toLowerCase().includes(m.toLowerCase())),x=async u=>{c(!0);try{await r(u)}catch(p){console.error("Failed to add member:",p)}finally{c(!1)}};return e.jsxs(ne,{open:l,onOpenChange:n,children:[e.jsx(de,{asChild:!0,children:e.jsxs(T,{variant:"outline",size:"sm",className:"bg-gradient-to-r from-emerald-500 to-teal-600 text-white hover:from-emerald-600 hover:to-teal-700 border-0",children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Add Friend"]})}),e.jsxs(oe,{className:"sm:max-w-md",children:[e.jsxs(Ce,{children:[e.jsx(ie,{children:"Add Friend to Group"}),e.jsx(ce,{children:"Select a friend from your list to add them to this group."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(K,{placeholder:"Search friends...",value:m,onChange:u=>g(u.target.value)}),b.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:k.length===0?"All your friends are already in this group!":"No friends found matching your search"})}):e.jsx(wt,{className:"h-[300px] pr-4",children:e.jsx("div",{className:"space-y-2",children:b.map(u=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:u.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["@",u.username]})]}),e.jsxs(T,{size:"sm",onClick:()=>x(u.id),disabled:d,className:"bg-gradient-to-r from-emerald-500 to-teal-600 text-white hover:from-emerald-600 hover:to-teal-700",children:[e.jsx(Be,{className:"h-4 w-4 mr-1"}),"Add"]})]},u.id))})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(T,{variant:"outline",onClick:()=>n(!1),children:"Done"})})]})]})]})}var me="Checkbox",[ts]=Oe(me),[ss,Ae]=ts(me);function as(t){const{__scopeCheckbox:a,checked:r,children:l,defaultChecked:n,disabled:d,form:c,name:m,onCheckedChange:g,required:k,value:b="on",internal_do_not_use_render:x}=t,[u,p]=qe({prop:r,defaultProp:n??!1,onChange:g,caller:me}),[j,v]=i.useState(null),[S,f]=i.useState(null),A=i.useRef(!1),D=j?!!c||!!j.closest("form"):!0,w={checked:u,disabled:d,setChecked:p,control:j,setControl:v,name:m,form:c,value:b,hasConsumerStoppedPropagationRef:A,required:k,defaultChecked:U(n)?!1:n,isFormControl:D,bubbleInput:S,setBubbleInput:f};return e.jsx(ss,{scope:a,...w,children:rs(x)?x(w):l})}var Ue="CheckboxTrigger",Ye=i.forwardRef(({__scopeCheckbox:t,onKeyDown:a,onClick:r,...l},n)=>{const{control:d,value:c,disabled:m,checked:g,required:k,setControl:b,setChecked:x,hasConsumerStoppedPropagationRef:u,isFormControl:p,bubbleInput:j}=Ae(Ue,t),v=X(n,b),S=i.useRef(g);return i.useEffect(()=>{const f=d?.form;if(f){const A=()=>x(S.current);return f.addEventListener("reset",A),()=>f.removeEventListener("reset",A)}},[d,x]),e.jsx(Y.button,{type:"button",role:"checkbox","aria-checked":U(g)?"mixed":g,"aria-required":k,"data-state":tt(g),"data-disabled":m?"":void 0,disabled:m,value:c,...l,ref:v,onKeyDown:W(a,f=>{f.key==="Enter"&&f.preventDefault()}),onClick:W(r,f=>{x(A=>U(A)?!0:!A),j&&p&&(u.current=f.isPropagationStopped(),u.current||f.stopPropagation())})})});Ye.displayName=Ue;var Xe=i.forwardRef((t,a)=>{const{__scopeCheckbox:r,name:l,checked:n,defaultChecked:d,required:c,disabled:m,value:g,onCheckedChange:k,form:b,...x}=t;return e.jsx(as,{__scopeCheckbox:r,checked:n,defaultChecked:d,disabled:m,required:c,onCheckedChange:k,name:l,form:b,value:g,internal_do_not_use_render:({isFormControl:u})=>e.jsxs(e.Fragment,{children:[e.jsx(Ye,{...x,ref:a,__scopeCheckbox:r}),u&&e.jsx(et,{__scopeCheckbox:r})]})})});Xe.displayName=me;var Je="CheckboxIndicator",Qe=i.forwardRef((t,a)=>{const{__scopeCheckbox:r,forceMount:l,...n}=t,d=Ae(Je,r);return e.jsx(kt,{present:l||U(d.checked)||d.checked===!0,children:e.jsx(Y.span,{"data-state":tt(d.checked),"data-disabled":d.disabled?"":void 0,...n,ref:a,style:{pointerEvents:"none",...t.style}})})});Qe.displayName=Je;var Ze="CheckboxBubbleInput",et=i.forwardRef(({__scopeCheckbox:t,...a},r)=>{const{control:l,hasConsumerStoppedPropagationRef:n,checked:d,defaultChecked:c,required:m,disabled:g,name:k,value:b,form:x,bubbleInput:u,setBubbleInput:p}=Ae(Ze,t),j=X(r,p),v=He(d),S=$e(l);i.useEffect(()=>{const A=u;if(!A)return;const D=window.HTMLInputElement.prototype,I=Object.getOwnPropertyDescriptor(D,"checked").set,L=!n.current;if(v!==d&&I){const _=new Event("click",{bubbles:L});A.indeterminate=U(d),I.call(A,U(d)?!1:d),A.dispatchEvent(_)}},[u,v,d,n]);const f=i.useRef(U(d)?!1:d);return e.jsx(Y.input,{type:"checkbox","aria-hidden":!0,defaultChecked:c??f.current,required:m,disabled:g,name:k,value:b,form:x,...a,tabIndex:-1,ref:j,style:{...a.style,...S,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});et.displayName=Ze;function rs(t){return typeof t=="function"}function U(t){return t==="indeterminate"}function tt(t){return U(t)?"indeterminate":t?"checked":"unchecked"}function ls({className:t,...a}){return e.jsx(Xe,{"data-slot":"checkbox",className:Q("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...a,children:e.jsx(Qe,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(St,{className:"size-3.5"})})})}var st=["PageUp","PageDown"],at=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],rt={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},te="Slider",[we,ns,ds]=Pt(te),[lt]=Oe(te,[ds]),[os,xe]=lt(te),nt=i.forwardRef((t,a)=>{const{name:r,min:l=0,max:n=100,step:d=1,orientation:c="horizontal",disabled:m=!1,minStepsBetweenThumbs:g=0,defaultValue:k=[l],value:b,onValueChange:x=()=>{},onValueCommit:u=()=>{},inverted:p=!1,form:j,...v}=t,S=i.useRef(new Set),f=i.useRef(0),D=c==="horizontal"?is:cs,[w=[],I]=qe({prop:b,defaultProp:k,onChange:N=>{[...S.current][f.current]?.focus(),x(N)}}),L=i.useRef(w);function _(N){const R=gs(w,N);h(N,R)}function $(N){h(N,f.current)}function B(){const N=L.current[f.current];w[f.current]!==N&&u(w)}function h(N,R,{commit:M}={commit:!1}){const E=js(d),z=ys(Math.round((N-l)/d)*d+l,E),V=Ve(z,[l,n]);I((F=[])=>{const O=hs(F,V,R);if(bs(O,g*d)){f.current=O.indexOf(V);const le=String(O)!==String(F);return le&&M&&u(O),le?O:F}else return F})}return e.jsx(os,{scope:t.__scopeSlider,name:r,disabled:m,min:l,max:n,valueIndexToChangeRef:f,thumbs:S.current,values:w,orientation:c,form:j,children:e.jsx(we.Provider,{scope:t.__scopeSlider,children:e.jsx(we.Slot,{scope:t.__scopeSlider,children:e.jsx(D,{"aria-disabled":m,"data-disabled":m?"":void 0,...v,ref:a,onPointerDown:W(v.onPointerDown,()=>{m||(L.current=w)}),min:l,max:n,inverted:p,onSlideStart:m?void 0:_,onSlideMove:m?void 0:$,onSlideEnd:m?void 0:B,onHomeKeyDown:()=>!m&&h(l,0,{commit:!0}),onEndKeyDown:()=>!m&&h(n,w.length-1,{commit:!0}),onStepKeyDown:({event:N,direction:R})=>{if(!m){const z=st.includes(N.key)||N.shiftKey&&at.includes(N.key)?10:1,V=f.current,F=w[V],O=d*z*R;h(F+O,V,{commit:!0})}}})})})})});nt.displayName=te;var[dt,ot]=lt(te,{startEdge:"left",endEdge:"right",size:"width",direction:1}),is=i.forwardRef((t,a)=>{const{min:r,max:l,dir:n,inverted:d,onSlideStart:c,onSlideMove:m,onSlideEnd:g,onStepKeyDown:k,...b}=t,[x,u]=i.useState(null),p=X(a,D=>u(D)),j=i.useRef(void 0),v=Ct(n),S=v==="ltr",f=S&&!d||!S&&d;function A(D){const w=j.current||x.getBoundingClientRect(),I=[0,w.width],_=De(I,f?[r,l]:[l,r]);return j.current=w,_(D-w.left)}return e.jsx(dt,{scope:t.__scopeSlider,startEdge:f?"left":"right",endEdge:f?"right":"left",direction:f?1:-1,size:"width",children:e.jsx(it,{dir:v,"data-orientation":"horizontal",...b,ref:p,style:{...b.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:D=>{const w=A(D.clientX);c?.(w)},onSlideMove:D=>{const w=A(D.clientX);m?.(w)},onSlideEnd:()=>{j.current=void 0,g?.()},onStepKeyDown:D=>{const I=rt[f?"from-left":"from-right"].includes(D.key);k?.({event:D,direction:I?-1:1})}})})}),cs=i.forwardRef((t,a)=>{const{min:r,max:l,inverted:n,onSlideStart:d,onSlideMove:c,onSlideEnd:m,onStepKeyDown:g,...k}=t,b=i.useRef(null),x=X(a,b),u=i.useRef(void 0),p=!n;function j(v){const S=u.current||b.current.getBoundingClientRect(),f=[0,S.height],D=De(f,p?[l,r]:[r,l]);return u.current=S,D(v-S.top)}return e.jsx(dt,{scope:t.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:e.jsx(it,{"data-orientation":"vertical",...k,ref:x,style:{...k.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:v=>{const S=j(v.clientY);d?.(S)},onSlideMove:v=>{const S=j(v.clientY);c?.(S)},onSlideEnd:()=>{u.current=void 0,m?.()},onStepKeyDown:v=>{const f=rt[p?"from-bottom":"from-top"].includes(v.key);g?.({event:v,direction:f?-1:1})}})})}),it=i.forwardRef((t,a)=>{const{__scopeSlider:r,onSlideStart:l,onSlideMove:n,onSlideEnd:d,onHomeKeyDown:c,onEndKeyDown:m,onStepKeyDown:g,...k}=t,b=xe(te,r);return e.jsx(Y.span,{...k,ref:a,onKeyDown:W(t.onKeyDown,x=>{x.key==="Home"?(c(x),x.preventDefault()):x.key==="End"?(m(x),x.preventDefault()):st.concat(at).includes(x.key)&&(g(x),x.preventDefault())}),onPointerDown:W(t.onPointerDown,x=>{const u=x.target;u.setPointerCapture(x.pointerId),x.preventDefault(),b.thumbs.has(u)?u.focus():l(x)}),onPointerMove:W(t.onPointerMove,x=>{x.target.hasPointerCapture(x.pointerId)&&n(x)}),onPointerUp:W(t.onPointerUp,x=>{const u=x.target;u.hasPointerCapture(x.pointerId)&&(u.releasePointerCapture(x.pointerId),d(x))})})}),ct="SliderTrack",mt=i.forwardRef((t,a)=>{const{__scopeSlider:r,...l}=t,n=xe(ct,r);return e.jsx(Y.span,{"data-disabled":n.disabled?"":void 0,"data-orientation":n.orientation,...l,ref:a})});mt.displayName=ct;var ke="SliderRange",xt=i.forwardRef((t,a)=>{const{__scopeSlider:r,...l}=t,n=xe(ke,r),d=ot(ke,r),c=i.useRef(null),m=X(a,c),g=n.values.length,k=n.values.map(u=>gt(u,n.min,n.max)),b=g>1?Math.min(...k):0,x=100-Math.max(...k);return e.jsx(Y.span,{"data-orientation":n.orientation,"data-disabled":n.disabled?"":void 0,...l,ref:m,style:{...t.style,[d.startEdge]:b+"%",[d.endEdge]:x+"%"}})});xt.displayName=ke;var Se="SliderThumb",ht=i.forwardRef((t,a)=>{const r=ns(t.__scopeSlider),[l,n]=i.useState(null),d=X(a,m=>n(m)),c=i.useMemo(()=>l?r().findIndex(m=>m.ref.current===l):-1,[r,l]);return e.jsx(ms,{...t,ref:d,index:c})}),ms=i.forwardRef((t,a)=>{const{__scopeSlider:r,index:l,name:n,...d}=t,c=xe(Se,r),m=ot(Se,r),[g,k]=i.useState(null),b=X(a,A=>k(A)),x=g?c.form||!!g.closest("form"):!0,u=$e(g),p=c.values[l],j=p===void 0?0:gt(p,c.min,c.max),v=us(l,c.values.length),S=u?.[m.size],f=S?ps(S,j,m.direction):0;return i.useEffect(()=>{if(g)return c.thumbs.add(g),()=>{c.thumbs.delete(g)}},[g,c.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[m.startEdge]:`calc(${j}% + ${f}px)`},children:[e.jsx(we.ItemSlot,{scope:t.__scopeSlider,children:e.jsx(Y.span,{role:"slider","aria-label":t["aria-label"]||v,"aria-valuemin":c.min,"aria-valuenow":p,"aria-valuemax":c.max,"aria-orientation":c.orientation,"data-orientation":c.orientation,"data-disabled":c.disabled?"":void 0,tabIndex:c.disabled?void 0:0,...d,ref:b,style:p===void 0?{display:"none"}:t.style,onFocus:W(t.onFocus,()=>{c.valueIndexToChangeRef.current=l})})}),x&&e.jsx(ut,{name:n??(c.name?c.name+(c.values.length>1?"[]":""):void 0),form:c.form,value:p},l)]})});ht.displayName=Se;var xs="RadioBubbleInput",ut=i.forwardRef(({__scopeSlider:t,value:a,...r},l)=>{const n=i.useRef(null),d=X(n,l),c=He(a);return i.useEffect(()=>{const m=n.current;if(!m)return;const g=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(g,"value").set;if(c!==a&&b){const x=new Event("input",{bubbles:!0});b.call(m,a),m.dispatchEvent(x)}},[c,a]),e.jsx(Y.input,{style:{display:"none"},...r,ref:d,defaultValue:a})});ut.displayName=xs;function hs(t=[],a,r){const l=[...t];return l[r]=a,l.sort((n,d)=>n-d)}function gt(t,a,r){const d=100/(r-a)*(t-a);return Ve(d,[0,100])}function us(t,a){return a>2?`Value ${t+1} of ${a}`:a===2?["Minimum","Maximum"][t]:void 0}function gs(t,a){if(t.length===1)return 0;const r=t.map(n=>Math.abs(n-a)),l=Math.min(...r);return r.indexOf(l)}function ps(t,a,r){const l=t/2,d=De([0,50],[0,l]);return(l-d(a)*r)*r}function fs(t){return t.slice(0,-1).map((a,r)=>t[r+1]-a)}function bs(t,a){if(a>0){const r=fs(t);return Math.min(...r)>=a}return!0}function De(t,a){return r=>{if(t[0]===t[1]||a[0]===a[1])return a[0];const l=(a[1]-a[0])/(t[1]-t[0]);return a[0]+l*(r-t[0])}}function js(t){return(String(t).split(".")[1]||"").length}function ys(t,a){const r=Math.pow(10,a);return Math.round(t*r)/r}var vs=nt,Ns=mt,ws=xt,ks=ht;function Ss({className:t,defaultValue:a,value:r,min:l=0,max:n=100,...d}){const c=i.useMemo(()=>Array.isArray(r)?r:Array.isArray(a)?a:[l,n],[r,a,l,n]);return e.jsxs(vs,{"data-slot":"slider",defaultValue:a,value:r,min:l,max:n,className:Q("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",t),...d,children:[e.jsx(Ns,{"data-slot":"slider-track",className:Q("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-4 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:e.jsx(ws,{"data-slot":"slider-range",className:Q("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:c.length},(m,g)=>e.jsx(ks,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},g))]})}const Cs=[{value:"equal",label:"Equal Split",icon:Ne,color:"blue"},{value:"who-joined",label:"Who Joined",icon:J,color:"purple"},{value:"itemized",label:"Itemized",icon:Z,color:"emerald"},{value:"custom-percentage",label:"Custom %",icon:We,color:"orange"},{value:"by-duration",label:"By Duration",icon:ve,color:"pink"}];function As({members:t,currentUserId:a,onAddExpense:r}){const[l,n]=i.useState(!1),[d,c]=i.useState(""),[m,g]=i.useState(""),[k,b]=i.useState(a),[x,u]=i.useState(!1),[p,j]=i.useState("equal"),[v,S]=i.useState("other"),[f,A]=i.useState(""),[D,w]=i.useState(!1),[I,L]=i.useState(""),[_,$]=i.useState(t.map(s=>s.id)),[B,h]=i.useState("equal"),[N,R]=i.useState(Object.fromEntries(t.map(s=>[s.id,0]))),[M,E]=i.useState(Object.fromEntries(t.map(s=>[s.id,Math.round(100/t.length)]))),[z,V]=i.useState(Object.fromEntries(t.map(s=>[s.id,1]))),[F,O]=i.useState([{item:"",amount:0,selectedBy:[]}]),le=s=>{$(o=>o.includes(s)?o.filter(y=>y!==s):[...o,s])},pt=(s,o)=>{const y=parseFloat(o)||0;R(P=>({...P,[s]:y}))},ft=(s,o)=>{E({...M,[s]:o[0]})},bt=(s,o)=>{const y=parseFloat(o)||0;V({...z,[s]:y})},jt=()=>{O([...F,{item:"",amount:0,selectedBy:[]}])},yt=s=>{F.length>1&&O(F.filter((o,y)=>y!==s))},Ee=(s,o,y)=>{const P=[...F];o==="amount"?P[s].amount=parseFloat(y)||0:P[s].item=y,O(P)},vt=(s,o)=>{const y=[...F],P=y[s];P.selectedBy.includes(o)?P.selectedBy=P.selectedBy.filter(C=>C!==o):P.selectedBy=[...P.selectedBy,o],O(y)},Pe=()=>{const s=parseFloat(m)||0,o={};switch(p){case"equal":const y=s/t.length;t.forEach(C=>{o[C.id]=y});break;case"who-joined":if(B==="equal"){if(_.length>0){const C=s/_.length;_.forEach(G=>{o[G]=C})}}else _.forEach(C=>{o[C]=N[C]||0});break;case"itemized":t.forEach(C=>o[C.id]=0),F.forEach(C=>{if(C.selectedBy.length>0){const G=C.amount/C.selectedBy.length;C.selectedBy.forEach(_e=>{o[_e]=(o[_e]||0)+G})}});break;case"custom-percentage":t.forEach(C=>{const G=M[C.id]||0;o[C.id]=s*G/100});break;case"by-duration":const P=Object.values(z).reduce((C,G)=>C+G,0);P>0&&t.forEach(C=>{const G=z[C.id]||0;o[C.id]=s*G/P});break}return o},Nt=()=>{if(p==="who-joined"&&_.length===0)return"Please select at least one participant";if(p==="custom-percentage"){const s=Object.values(M).reduce((o,y)=>o+y,0);if(Math.abs(s-100)>.5)return`Percentages must add up to 100% (currently ${s.toFixed(1)}%)`}return p==="itemized"&&!F.some(o=>o.item.trim()&&o.amount>0)?"Please add at least one item with a name and amount":null},Me=async s=>{s.preventDefault(),w(!0),L("");const o=Nt();if(o){L(o),w(!1);return}try{const y=Pe(),P=p==="who-joined"?_:p==="itemized"?t.filter(C=>y[C.id]>0).map(C=>C.id):t.map(C=>C.id);await r({description:d,amount:parseFloat(m),paidBy:k,splitWith:P,splitType:p,splitAmounts:y,category:v,notes:f,itemSplits:p==="itemized"?F:void 0,duration:p==="by-duration"?z:void 0}),c(""),g(""),b(a),j("equal"),$(t.map(C=>C.id)),E(Object.fromEntries(t.map(C=>[C.id,Math.round(100/t.length)]))),V(Object.fromEntries(t.map(C=>[C.id,1]))),O([{item:"",amount:0,selectedBy:[]}]),S("other"),A(""),n(!1)}catch(y){L(y.message||"Failed to add expense")}finally{w(!1)}},se=Pe(),Re=Object.values(M).reduce((s,o)=>s+o,0);return e.jsxs(ne,{open:l,onOpenChange:n,children:[e.jsx(de,{asChild:!0,children:e.jsxs(T,{className:"bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700",children:[e.jsx(ye,{className:"h-4 w-4 mr-2"}),"Add Expense"]})}),e.jsxs(oe,{className:"sm:max-w-2xl p-0 gap-0 max-h-[90vh] flex flex-col",children:[e.jsx(ie,{className:"sr-only",children:"Add Group Expense"}),e.jsx(ce,{className:"sr-only",children:"Record a group expense with flexible splitting options"}),e.jsx("div",{className:"px-6 pt-6 pb-4 border-b",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Add Group Expense"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Record a group expense with flexible splitting options"})]}),e.jsx(T,{variant:"ghost",size:"icon",onClick:()=>n(!1),className:"h-8 w-8 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800",children:e.jsx(At,{className:"h-4 w-4"})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-5",children:e.jsxs("form",{onSubmit:Me,className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(H,{htmlFor:"description",className:"text-sm font-medium",children:"Description"}),e.jsx(K,{id:"description",placeholder:"e.g., Dinner at restaurant",value:d,onChange:s=>c(s.target.value),required:!0,className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(H,{htmlFor:"amount",className:"text-sm font-medium",children:"Total Amount (à§³)"}),e.jsx(K,{id:"amount",type:"number",step:"0.01",min:"0.01",placeholder:"0.00",value:m,onChange:s=>g(s.target.value),required:!0,className:"h-11"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(H,{htmlFor:"category",className:"text-sm font-medium",children:"Category"}),e.jsxs(pe,{value:v,onValueChange:S,children:[e.jsx(fe,{className:"h-11",children:e.jsx(be,{})}),e.jsx(je,{children:Ot.map(s=>{const o=s.icon;return e.jsx(q,{value:s.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{className:`h-4 w-4 ${s.color}`}),s.label]})},s.id)})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(H,{htmlFor:"paidBy",className:"text-sm font-medium",children:"Paid By"}),e.jsxs(pe,{value:k,onValueChange:b,children:[e.jsx(fe,{className:"h-11",children:e.jsx(be,{})}),e.jsx(je,{children:t.map(s=>e.jsx(q,{value:s.id,children:s.name},s.id))})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(H,{className:"text-sm font-medium",children:"How should we split this?"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:Cs.map(s=>{const o=s.icon,y=p===s.value;return e.jsxs("button",{type:"button",onClick:()=>j(s.value),className:`p-3 rounded-xl border-2 text-center transition-all ${y?s.value==="equal"?"border-blue-500 bg-blue-50 dark:bg-blue-950/20":s.value==="who-joined"?"border-purple-500 bg-purple-50 dark:bg-purple-950/20":s.value==="itemized"?"border-emerald-500 bg-emerald-50 dark:bg-emerald-950/20":s.value==="custom-percentage"?"border-orange-500 bg-orange-50 dark:bg-orange-950/20":"border-pink-500 bg-pink-50 dark:bg-pink-950/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[e.jsx(o,{className:`h-5 w-5 mx-auto mb-1 ${y?s.value==="equal"?"text-blue-600 dark:text-blue-400":s.value==="who-joined"?"text-purple-600 dark:text-purple-400":s.value==="itemized"?"text-emerald-600 dark:text-emerald-400":s.value==="custom-percentage"?"text-orange-600 dark:text-orange-400":"text-pink-600 dark:text-pink-400":"text-gray-400"}`}),e.jsx("p",{className:"text-xs font-medium",children:s.label})]},s.value)})})]}),e.jsxs("div",{className:"transition-all duration-200",children:[p==="equal"&&e.jsxs("div",{className:"p-5 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-100 dark:bg-blue-900/30",children:e.jsx(Ne,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Everyone pays equally"})]}),e.jsx("div",{className:"space-y-2",children:t.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center",children:e.jsx(J,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:s.name})]}),e.jsxs("div",{className:"px-3 py-1.5 rounded-lg bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-400 font-semibold border border-emerald-200 dark:border-emerald-800",children:["à§³",(se[s.id]||0).toFixed(2)]})]},s.id))})]}),p==="who-joined"&&e.jsxs("div",{className:"p-5 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/30",children:e.jsx(J,{className:"h-4 w-4 text-purple-600 dark:text-purple-400"})}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Who participated in this expense?"})]}),e.jsxs("div",{className:"flex gap-2 p-1 bg-gray-100 dark:bg-gray-900 rounded-lg",children:[e.jsxs("button",{type:"button",onClick:()=>h("equal"),className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all ${B==="equal"?"bg-purple-500 text-white shadow-sm":"text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100"}`,children:[e.jsx(Ne,{className:"h-4 w-4 inline mr-2"}),"Split Equally"]}),e.jsxs("button",{type:"button",onClick:()=>h("manual"),className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all ${B==="manual"?"bg-purple-500 text-white shadow-sm":"text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100"}`,children:[e.jsx(Z,{className:"h-4 w-4 inline mr-2"}),"Manual Amounts"]})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:B==="equal"?"Select members and split the cost equally among them.":"Select members and manually enter the amount each person spent."}),e.jsx("div",{className:"space-y-2",children:t.map(s=>{const o=_.includes(s.id);return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg transition-all ${o?"bg-purple-50 dark:bg-purple-900/20 border-2 border-purple-500 dark:border-purple-600":"border-2 border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(ls,{checked:o,onCheckedChange:y=>{$(y?P=>[...P,s.id]:P=>P.filter(C=>C!==s.id))},className:"data-[state=checked]:bg-purple-600 data-[state=checked]:border-purple-600"}),e.jsx("label",{className:"font-medium text-gray-900 dark:text-gray-100 cursor-pointer flex-1",onClick:()=>le(s.id),children:s.name})]}),o&&(B==="manual"?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"à§³"}),e.jsx(K,{type:"number",placeholder:"0.00",value:N[s.id]||"",onChange:y=>pt(s.id,y.target.value),className:"w-28 h-9 text-right",step:"0.01",min:"0"})]}):e.jsxs("div",{className:"px-3 py-1.5 rounded-lg bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-400 font-semibold border border-emerald-200 dark:border-emerald-800",children:["à§³",(se[s.id]||0).toFixed(2)]}))]},s.id)})}),B==="manual"&&_.length>0&&e.jsxs("div",{className:"p-4 rounded-lg bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"Total Entered:"}),e.jsxs("span",{className:`text-sm font-semibold ${_.reduce((s,o)=>s+(N[o]||0),0)===parseFloat(m||"0")?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:["à§³",_.reduce((s,o)=>s+(N[o]||0),0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Expected Total:"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:["à§³",parseFloat(m||"0").toFixed(2)]})]}),_.reduce((s,o)=>s+(N[o]||0),0)!==parseFloat(m||"0")&&e.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-2",children:"âš ï¸ Amounts don't match the total expense"})]})]}),p==="itemized"&&e.jsxs("div",{className:"p-5 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 rounded-lg bg-emerald-100 dark:bg-emerald-900/30",children:e.jsx(Z,{className:"h-4 w-4 text-emerald-600 dark:text-emerald-400"})}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"What did each person order?"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Add items and assign them to the people who ordered them."}),e.jsxs("div",{className:"space-y-3",children:[F.map((s,o)=>e.jsxs("div",{className:"p-4 rounded-lg border border-gray-200 dark:border-gray-700 space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{placeholder:"Item name (e.g., Pizza)",value:s.item,onChange:y=>Ee(o,"item",y.target.value),className:"flex-1 h-10"}),e.jsxs("div",{className:"relative w-32",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-sm text-muted-foreground",children:"à§³"}),e.jsx(K,{type:"number",placeholder:"0.00",value:s.amount||"",onChange:y=>Ee(o,"amount",y.target.value),className:"pl-8 h-10",step:"0.01"})]}),F.length>1&&e.jsx(T,{type:"button",variant:"ghost",size:"icon",onClick:()=>yt(o),className:"h-10 w-10 text-red-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",children:e.jsx(Ge,{className:"h-4 w-4"})})]}),e.jsxs("div",{children:[e.jsx(H,{className:"text-xs text-muted-foreground mb-2 block",children:"Who ordered this?"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(y=>{const P=s.selectedBy.includes(y.id);return e.jsx("button",{type:"button",onClick:()=>vt(o,y.id),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-all border ${P?"bg-emerald-500 text-white border-emerald-500 shadow-sm":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}`,children:y.name},y.id)})})]})]},o)),e.jsxs(T,{type:"button",variant:"outline",onClick:jt,className:"w-full border-dashed border-2 hover:bg-gray-50 dark:hover:bg-gray-800",children:[e.jsx(ye,{className:"h-4 w-4 mr-2"}),"Add Another Item"]})]}),e.jsxs("div",{className:"mt-4 p-4 rounded-lg bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-3",children:"Split Summary:"}),e.jsx("div",{className:"space-y-2",children:t.map(s=>{const o=se[s.id]||0;return o===0?null:e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:s.name}),e.jsxs("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:["à§³",o.toFixed(2)]})]},s.id)})})]})]}),p==="custom-percentage"&&e.jsxs("div",{className:"p-5 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 rounded-lg bg-orange-100 dark:bg-orange-900/30",children:e.jsx(We,{className:"h-4 w-4 text-orange-600 dark:text-orange-400"})}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Set custom percentages"})]}),e.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-semibold ${Math.abs(Re-100)<.5?"bg-emerald-50 text-emerald-700 dark:bg-emerald-900/20 dark:text-emerald-400 border border-emerald-200 dark:border-emerald-800":"bg-red-50 text-red-700 dark:bg-red-900/20 dark:text-red-400 border border-red-200 dark:border-red-800"}`,children:["Total: ",Re.toFixed(0),"%"]})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Adjust the percentage each person should pay. Must total 100%."}),e.jsx("div",{className:"space-y-4",children:t.map(s=>{const o=M[s.id]||0,y=se[s.id]||0;return e.jsxs("div",{className:"p-4 rounded-lg border border-gray-200 dark:border-gray-700 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:s.name}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:[o,"%"]}),e.jsxs("div",{className:"px-3 py-1.5 rounded-lg bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-400 font-semibold border border-emerald-200 dark:border-emerald-800",children:["à§³",y.toFixed(2)]})]})]}),e.jsx(Ss,{value:[o],onValueChange:P=>ft(s.id,P),max:100,step:1,className:"w-full"})]},s.id)})})]}),p==="by-duration"&&e.jsxs("div",{className:"p-5 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 rounded-lg bg-pink-100 dark:bg-pink-900/30",children:e.jsx(ve,{className:"h-4 w-4 text-pink-600 dark:text-pink-400"})}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Days/hours each person spent"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Enter how many days or hours each person participated, and the cost will be split proportionally."}),e.jsx("div",{className:"space-y-2",children:t.map(s=>{const o=z[s.id]||0,y=se[s.id]||0;return e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 transition-colors",children:[e.jsx("div",{className:"h-9 w-9 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center",children:e.jsx(ve,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})}),e.jsx("span",{className:"font-medium flex-1 text-gray-900 dark:text-gray-100",children:s.name}),e.jsx(K,{type:"number",value:o||"",onChange:P=>bt(s.id,P.target.value),className:"w-24 h-9 text-center",step:"0.5",min:"0",placeholder:"0"}),e.jsx("span",{className:"text-sm text-muted-foreground w-12",children:"days"}),e.jsxs("div",{className:"px-3 py-1.5 rounded-lg bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-400 font-semibold min-w-[80px] text-center border border-emerald-200 dark:border-emerald-800",children:["à§³",y.toFixed(2)]})]},s.id)})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(H,{htmlFor:"notes",className:"text-sm font-medium",children:"Notes (optional)"}),e.jsx(Ke,{id:"notes",placeholder:"Add any additional details...",value:f,onChange:s=>A(s.target.value),rows:2,className:"resize-none"})]}),I&&e.jsx("div",{className:"p-3 rounded-lg bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-300 text-sm",children:I})]})}),e.jsx("div",{className:"px-6 py-4 border-t bg-gray-50 dark:bg-gray-900/50",children:e.jsx(T,{type:"submit",onClick:Me,className:"w-full h-11 bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white font-semibold",disabled:D,children:D?"Adding Expense...":"Add Expense"})})]})]})}const Ds=Dt("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function ze({className:t,variant:a,...r}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:Q(Ds({variant:a}),t),...r})}function Le({className:t,...a}){return e.jsx("div",{"data-slot":"alert-description",className:Q("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...a})}function Es({expenses:t,members:a,currentUserId:r,groupName:l,onSettle:n}){const[d,c]=i.useState(!1),[m,g]=i.useState(!1),k=t.reduce((j,v)=>j+v.amount,0),b=t.filter(j=>j.paidBy===r),x=b.reduce((j,v)=>j+v.amount,0),u=a.map(j=>{const v=t.filter(f=>f.paidBy===j.id),S=v.reduce((f,A)=>f+A.amount,0);return{member:j,total:S,expenseCount:v.length}}).filter(j=>j.total>0),p=async()=>{g(!0);try{await n(),c(!1)}catch(j){console.error("Failed to settle bill:",j)}finally{g(!1)}};return e.jsxs(ne,{open:d,onOpenChange:c,children:[e.jsx(de,{asChild:!0,children:e.jsxs(T,{variant:"outline",className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white hover:from-blue-600 hover:to-indigo-700 border-0",children:[e.jsx(qt,{className:"h-4 w-4 mr-2"}),"Settle & Sync to Tracker"]})}),e.jsxs(oe,{className:"sm:max-w-lg",children:[e.jsxs(Ce,{children:[e.jsx(ie,{children:"Settle Group Bill"}),e.jsx(ce,{children:"Review the bill breakdown and sync expenses to your personal tracker"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(ze,{className:"border-emerald-200 bg-emerald-50 dark:bg-emerald-900/20",children:[e.jsx($t,{className:"h-4 w-4 text-emerald-600"}),e.jsxs(Le,{className:"text-emerald-900 dark:text-emerald-100",children:[e.jsx("strong",{children:"Total Group Bill:"})," à§³",k.toFixed(2)]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-sm text-muted-foreground",children:"Individual Contributions:"}),u.map(({member:j,total:v,expenseCount:S})=>e.jsx("div",{className:`p-3 rounded-lg border ${j.id===r?"bg-emerald-50 border-emerald-200":"bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[j.name,j.id===r&&" (You)"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[S," expense",S!==1?"s":""]})]}),e.jsxs("p",{className:"font-semibold text-emerald-600 dark:text-emerald-400",children:["à§³",v.toFixed(2)]})]})},j.id))]}),e.jsxs(ze,{className:"border-blue-200 bg-blue-50 dark:bg-blue-900/20",children:[e.jsx(Yt,{className:"h-4 w-4 text-blue-600"}),e.jsxs(Le,{className:"text-blue-900 dark:text-blue-100 text-sm",children:["When you settle, your ",b.length," expense",b.length!==1?"s":""," (à§³",x.toFixed(2),") will be added to your personal expense tracker for analysis and budgeting."]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(T,{variant:"outline",className:"flex-1",onClick:()=>c(!1),children:"Cancel"}),e.jsx(T,{className:"flex-1 bg-gradient-to-r from-emerald-500 to-teal-600 text-white hover:from-emerald-600 hover:to-teal-700",onClick:p,disabled:m||t.length===0,children:m?"Settling...":"Settle & Sync"})]})]})]})]})}function Ps({group:t,currentUserId:a,friends:r,onBack:l,onAddMember:n,onAddExpense:d,onSimplify:c,onSettleAndSync:m,onDeleteGroup:g}){const[k,b]=i.useState(!1),[x,u]=i.useState(""),[p,j]=i.useState("all"),[v,S]=i.useState(!1),f=t.createdBy===a,A=async()=>{b(!0);try{await c()}catch(h){console.error("Failed to simplify debts:",h)}finally{b(!1)}},D=async()=>{S(!0);try{await g()}catch(h){console.error("Failed to delete group:",h)}finally{S(!1)}},w=h=>t.members.find(R=>R.id===h)?.name||"Unknown",I=(h,N,R)=>h.filter(M=>{const E=N===""||M.description.toLowerCase().includes(N.toLowerCase())||w(M.paidBy).toLowerCase().includes(N.toLowerCase()),z=R==="all"||M.category===R;return E&&z}),L=(h,N)=>{const R=["Date","Description","Category","Amount","Paid By","Split With","Notes"],M=h.map(E=>[new Date(E.createdAt).toLocaleDateString(),E.description,Te(E.category||"other").label,E.amount.toFixed(2),w(E.paidBy),E.splitWith.map(z=>w(z)).join("; "),E.notes||""]);return[R,...M].map(E=>E.map(z=>`"${z}"`).join(",")).join(`
`)},_=(h,N)=>{const R=new Blob([h],{type:"text/csv"}),M=window.URL.createObjectURL(R),E=document.createElement("a");E.href=M,E.download=N,E.click(),window.URL.revokeObjectURL(M)},$=()=>{const h=t.balances||{},N=Object.entries(h).filter(([R,M])=>Math.abs(M)>.01);return N.length===0?e.jsx("p",{className:"text-muted-foreground",children:"All settled up! ðŸŽ‰"}):e.jsx("div",{className:"space-y-2",children:N.map(([R,M])=>{const[E,z]=R.split("-"),V=w(E),F=w(z);return e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[e.jsxs("span",{className:"text-sm",children:[F," owes ",V]}),e.jsxs("span",{className:"text-emerald-600 dark:text-emerald-400 font-semibold",children:["à§³",M.toFixed(2)]})]},R)})})},B=t.expenses.reduce((h,N)=>h+N.amount,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(T,{variant:"ghost",size:"icon",onClick:l,className:"hover:bg-emerald-100 dark:hover:bg-emerald-900/30",children:e.jsx(Et,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("h2",{children:t.name}),f&&e.jsxs(he,{className:"bg-gradient-to-r from-amber-500 to-orange-600 text-white border-0",children:[e.jsx(Ie,{className:"h-3 w-3 mr-1"}),"Leader"]})]}),t.description&&e.jsx("p",{className:"text-muted-foreground text-sm",children:t.description}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Created by ",w(t.createdBy)]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Es,{expenses:t.expenses,members:t.members,currentUserId:a,groupName:t.name,onSettle:m}),f&&e.jsxs(Mt,{children:[e.jsx(Rt,{asChild:!0,children:e.jsxs(T,{variant:"outline",size:"sm",className:"border-red-300 text-red-600 hover:bg-red-50 dark:border-red-700 dark:text-red-400 dark:hover:bg-red-900/20",children:[e.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Delete Group"]})}),e.jsxs(_t,{children:[e.jsxs(Bt,{children:[e.jsxs(Tt,{className:"flex items-center gap-2",children:[e.jsx(Vt,{className:"h-5 w-5 text-red-600"}),"Delete Group?"]}),e.jsxs(Ft,{children:['This will permanently delete the group "',t.name,'" and all its expenses. This action cannot be undone. All members will lose access to this group.']})]}),e.jsxs(It,{children:[e.jsx(zt,{children:"Cancel"}),e.jsx(Lt,{onClick:D,disabled:v,className:"bg-red-600 hover:bg-red-700 text-white",children:v?"Deleting...":"Delete Group"})]})]})]})]})]}),B>0&&e.jsx(ae,{className:"border-2 border-emerald-200 bg-white",children:e.jsx(re,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Total Group Bill"}),e.jsxs("p",{className:"text-3xl font-bold text-emerald-600 dark:text-emerald-400",children:["à§³",B.toFixed(2)]})]}),e.jsx("div",{className:"p-4 rounded-full bg-gradient-to-br from-emerald-500 to-teal-600",children:e.jsx(Z,{className:"h-8 w-8 text-white"})})]})})}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(ae,{className:"border-0 shadow-xl bg-white",children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[e.jsx(ge,{className:"text-lg",children:"Members"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(es,{friends:r,existingMemberIds:t.members.map(h=>h.id),onAddMember:n}),e.jsx(J,{className:"h-5 w-5 text-muted-foreground"})]})]}),e.jsx(re,{children:e.jsx("div",{className:"space-y-2",children:t.members.map(h=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 transition-colors border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center text-white font-semibold",children:h.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:h.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["@",h.username]})]})]}),h.id===t.createdBy&&e.jsxs(he,{variant:"outline",className:"border-amber-500 text-amber-600 dark:text-amber-400",children:[e.jsx(Ie,{className:"h-3 w-3 mr-1"}),"Leader"]})]},h.id))})})]}),e.jsxs(ae,{className:"border-0 shadow-xl bg-white",children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[e.jsx(ge,{className:"text-lg",children:"Balances"}),e.jsx(Fe,{className:"h-5 w-5 text-muted-foreground"})]}),e.jsxs(re,{children:[$(),Object.keys(t.balances||{}).length>0&&e.jsxs(T,{className:"w-full mt-4 bg-gradient-to-r from-blue-500 to-indigo-600 text-white hover:from-blue-600 hover:to-indigo-700",variant:"outline",onClick:A,disabled:k,children:[e.jsx(Fe,{className:"h-4 w-4 mr-2"}),k?"Simplifying...":"Simplify Debts"]})]})]})]}),e.jsxs(ae,{className:"border-0 shadow-xl bg-white",children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[e.jsx(ge,{className:"text-lg",children:"Expenses"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(T,{variant:"ghost",size:"sm",onClick:()=>{const h=L(t.expenses,t.members);_(h,`${t.name}-expenses.csv`)},children:[e.jsx(Gt,{className:"h-4 w-4 mr-1"}),"Export"]}),e.jsx(As,{members:t.members,currentUserId:a,onAddExpense:d}),e.jsx(Z,{className:"h-5 w-5 text-muted-foreground"})]})]}),e.jsxs(re,{children:[t.expenses.length>0&&e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(K,{placeholder:"Search expenses...",value:x,onChange:h=>u(h.target.value),className:"w-full"})}),e.jsxs(pe,{value:p,onValueChange:j,children:[e.jsx(fe,{className:"w-[180px]",children:e.jsx(be,{placeholder:"All Categories"})}),e.jsxs(je,{children:[e.jsx(q,{value:"all",children:"All Categories"}),e.jsx(q,{value:"food",children:"Food & Dining"}),e.jsx(q,{value:"groceries",children:"Groceries"}),e.jsx(q,{value:"transport",children:"Transport"}),e.jsx(q,{value:"entertainment",children:"Entertainment"}),e.jsx(q,{value:"utilities",children:"Utilities"}),e.jsx(q,{value:"housing",children:"Housing"}),e.jsx(q,{value:"travel",children:"Travel"}),e.jsx(q,{value:"gifts",children:"Gifts"}),e.jsx(q,{value:"healthcare",children:"Healthcare"}),e.jsx(q,{value:"other",children:"Other"})]})]})]}),t.expenses.length===0?e.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No expenses yet"}):e.jsx("div",{className:"space-y-3",children:I(t.expenses,x,p).map(h=>{const N=Te(h.category||"other"),R=N.icon,M=h.paidBy===a;return e.jsxs("div",{className:`p-4 border rounded-lg hover:shadow-sm transition-shadow ${M?"border-emerald-200 bg-emerald-50/50 dark:bg-emerald-900/10 dark:border-emerald-800":""}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:`p-1 rounded ${N.bgColor}`,children:e.jsx(R,{className:`h-4 w-4 ${N.color}`})}),e.jsx("p",{className:"font-medium",children:h.description}),M&&e.jsx(he,{className:"bg-emerald-500 text-white text-xs",children:"You paid"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Paid by ",w(h.paidBy)]}),h.notes&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1 italic",children:h.notes}),h.splitType&&h.splitType!=="equal"&&h.splitAmounts&&e.jsxs("div",{className:"mt-2 text-xs text-muted-foreground bg-gray-50 p-2 rounded",children:[e.jsx("p",{className:"font-medium mb-1",children:h.splitType==="unequal"?"Custom Split:":"Percentage Split:"}),e.jsx("div",{className:"space-y-0.5",children:h.splitWith.map(E=>e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:w(E)}),e.jsxs("span",{children:["à§³",(h.splitAmounts[E]||0).toFixed(2)]})]},E))})]})]}),e.jsxs("p",{className:"text-emerald-600 dark:text-emerald-400 font-semibold text-lg",children:["à§³",h.amount.toFixed(2)]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${N.bgColor} ${N.color}`,children:N.label}),e.jsx("span",{className:"mx-2",children:"â€¢"}),h.splitType==="equal"?"Equal split":h.splitType==="unequal"?"Custom split":"Percentage split",e.jsx("span",{className:"mx-2",children:"â€¢"}),h.splitWith.length," people",e.jsx("span",{className:"mx-2",children:"â€¢"}),new Date(h.createdAt).toLocaleDateString()]})]},h.id)})})]})]})]})}function Ms({onCreateGroup:t}){const[a,r]=i.useState(!1),[l,n]=i.useState(""),[d,c]=i.useState(""),[m,g]=i.useState(!1),k=async b=>{b.preventDefault(),g(!0);try{await t({name:l,description:d}),n(""),c(""),r(!1)}catch(x){console.error("Failed to create group:",x)}finally{g(!1)}};return e.jsxs(ne,{open:a,onOpenChange:r,children:[e.jsx(de,{asChild:!0,children:e.jsxs(T,{className:"bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700",children:[e.jsx(ye,{className:"h-4 w-4 mr-2"}),"Create Group"]})}),e.jsxs(oe,{className:"sm:max-w-md",children:[e.jsxs(Ce,{children:[e.jsx(ie,{children:"Create New Group"}),e.jsx(ce,{children:"Create a group to split expenses with friends, roommates, or travel companions. You can add members after creating the group."})]}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(H,{htmlFor:"groupName",children:"Group Name"}),e.jsx(K,{id:"groupName",placeholder:"e.g., Weekend Trip, Roommates, Vacation 2024",value:l,onChange:b=>n(b.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(H,{htmlFor:"description",children:"Description (optional)"}),e.jsx(Ke,{id:"description",placeholder:"What's this group for?",value:d,onChange:b=>c(b.target.value),rows:3})]}),e.jsx(T,{type:"submit",className:"w-full bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700",disabled:m,children:m?"Creating...":"Create Group"})]})]})]})}function $s({groups:t,selectedGroupId:a,selectedGroup:r,currentUserId:l,loading:n,friends:d,onSelectGroup:c,onCreateGroup:m,onBackToGroups:g,onAddMember:k,onAddExpense:b,onSimplify:x,onSettleAndSync:u,onDeleteGroup:p,onAddFriend:j,onAddFriendByEmail:v,onAddFriendByCode:S,onSearchSuggestions:f}){const A=Array.isArray(t)?t:[],D=Array.isArray(d)?d:[],w=A.length,I=A.reduce((B,h)=>B+(h.memberCount||0),0),L=A.reduce((B,h)=>B+(h.expenseCount||0),0),_=w>0?Math.max(1,Math.round(I/w)):0,$=[{label:"Active crews",value:w.toString(),hint:"Organized spaces"},{label:"People inside",value:I.toString(),hint:`${_} avg. per crew`},{label:"Shared entries",value:L.toString(),hint:"Tracked expenses"}];return a&&r?e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8 pb-16",children:[e.jsx("section",{className:"rounded-[32px] border border-gray-200 bg-white p-8 shadow-sm",children:e.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-gray-500",children:"Group cockpit"}),e.jsx("h1",{className:"mt-2 text-3xl font-semibold text-gray-900",children:r.name}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:r.description||"Manage members, balances, and rituals from a single lane."})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(T,{variant:"outline",className:"rounded-full",onClick:g,children:"Back to crews"}),e.jsx(T,{className:"rounded-full bg-emerald-500 text-white hover:bg-emerald-600",onClick:x,children:"Simplify balances"}),e.jsx(T,{variant:"secondary",className:"rounded-full",onClick:u,children:"Settle & sync"})]})]})}),e.jsx(Ps,{group:r,currentUserId:l,friends:D,onBack:g,onAddMember:k,onAddExpense:b,onSimplify:x,onSettleAndSync:u,onDeleteGroup:p})]}):a&&n?e.jsx("div",{className:"max-w-7xl mx-auto space-y-8 pb-16",children:e.jsxs("section",{className:"rounded-[32px] border border-dashed border-emerald-200 bg-white p-12 text-center",children:[e.jsx("div",{className:"mx-auto flex h-20 w-20 items-center justify-center rounded-full bg-emerald-50",children:e.jsxs("svg",{className:"h-10 w-10 animate-spin text-emerald-500",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),e.jsx("p",{className:"mt-6 text-gray-600",children:"Loading group detailsâ€¦"})]})}):e.jsxs("div",{className:"max-w-7xl mx-auto space-y-10 pb-16",children:[e.jsx("section",{className:"rounded-[36px] bg-gradient-to-br from-gray-900 via-teal-950 to-gray-900 p-10 text-white",children:e.jsxs("div",{className:"flex flex-col gap-10 lg:flex-row lg:items-end lg:justify-between",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.6em] text-emerald-200",children:"Crews"}),e.jsx("h1",{className:"mt-3 text-4xl lg:text-5xl font-semibold leading-tight",children:"Command center for every shared balance"}),e.jsx("p",{className:"mt-3 text-white/70 max-w-2xl",children:"Spin up squads, keep rituals tight, and broadcast settlements without hopping between tabs."})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[j&&v&&S&&f&&e.jsx(Ht,{onAddFriend:j,onAddFriendByEmail:v,onAddFriendByCode:S,onSearchSuggestions:f,userFriendCode:l,variant:"secondary"}),e.jsx(Ms,{onCreateGroup:m})]})]}),e.jsx("div",{className:"grid w-full max-w-md gap-4 sm:grid-cols-3 lg:grid-cols-1",children:$.map(B=>e.jsxs("div",{className:"rounded-2xl border border-white/15 bg-white/10 p-4 backdrop-blur",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-white/60",children:B.label}),e.jsx("p",{className:"mt-3 text-3xl font-semibold",children:B.value}),e.jsx("p",{className:"text-xs text-white/60 mt-1",children:B.hint})]},B.label))})]})}),n?e.jsx("section",{className:"rounded-3xl border border-gray-200 bg-white p-12 text-center text-gray-500 shadow-sm",children:"Pulling your group ledger..."}):e.jsxs("section",{className:"grid gap-6 lg:grid-cols-[1.25fr_0.75fr]",children:[e.jsxs("div",{className:"rounded-3xl border border-gray-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-gray-500",children:"Group stack"}),e.jsxs("div",{className:"mt-2 flex flex-col gap-1 sm:flex-row sm:items-baseline sm:justify-between",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Choose a crew"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[w," active â€¢ sorted by recency"]})]})]}),e.jsx(Zt,{groups:A,onSelectGroup:c})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-3xl border border-gray-200 bg-gray-50/70 p-5 shadow-inner",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-gray-500",children:"Network health"}),e.jsxs("div",{className:"mt-4 grid gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Roster reach"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[D.length," friends"]})]}),e.jsxs("div",{className:"rounded-full bg-white px-3 py-1 text-xs text-gray-500",children:[Math.max(D.length-I,0)," unassigned"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Avg. headcount"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[_," per crew"]})]}),e.jsx("div",{className:"rounded-full bg-white px-3 py-1 text-xs text-gray-500",children:"Balance coverage"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ledger velocity"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[L," entries"]})]}),e.jsx("div",{className:"rounded-full bg-white px-3 py-1 text-xs text-gray-500",children:"Past 90 days"})]})]})]}),e.jsxs("div",{className:"rounded-3xl border border-gray-200 bg-white p-5 shadow-sm",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-gray-500",children:"Playbook"}),e.jsxs("div",{className:"mt-4 space-y-3 text-sm text-gray-600",children:[e.jsx("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:"1. Invite or find friends â†’ assign them into crews."}),e.jsx("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:"2. Log expenses fast, then tap Simplify when balances look messy."}),e.jsx("div",{className:"rounded-2xl border border-gray-100 bg-gray-50 p-3",children:"3. Hit Settle & sync to broadcast closing numbers."})]})]})]})]})]})}export{$s as GroupsPage};
