import{r as b,U as j,j as e,B as N,R as C,C as y,a as f,W as E,A as D}from"./index-DwQK3muS.js";import{g as k,C as B,D as M}from"./ExpenseCategories-CMdOrydD.js";import{C as G}from"./utensils-Drbt0Jsj.js";import{T as L}from"./target-P-yb90kb.js";import{R as S,P as U,a as P,C as I,B as Y,X as V,Y as W,T as K,b as z}from"./PieChart-Doq3FOt-.js";import{C as X}from"./calendar-CHSlFlq8.js";import{A as H}from"./arrow-up-right-CsISBi3M.js";import{D as Q}from"./dollar-sign-DGDz-2Nv.js";function _({stats:d,onNavigate:r}){const a={totalGroups:0,totalFriends:0,totalExpenses:0,totalBalance:0,totalOwed:0,totalReceiving:0,recentActivity:[],monthlyTotal:0,monthlyExpensesCount:0,personalExpensesCount:0,...d},n=Array.isArray(a.recentActivity)?a.recentActivity:[],A=b.useMemo(()=>n.reduce((s,t)=>{const l=t.category||"other";return s[l]||(s[l]={category:l,amount:0,count:0}),s[l].amount+=t.amount,s[l].count+=1,s},{}),[n]),h=Object.values(A).map(s=>{const t=k(s.category);return{name:t.label,value:parseFloat(s.amount.toFixed(2)),count:s.count,color:t.color.replace("text-","")}}),$=b.useMemo(()=>["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((l,m)=>{const g=n.filter(i=>new Date(i.createdAt).getDay()===m);return{day:l,amount:g.reduce((i,c)=>i+(c.amount||0),0)}}),[n]),u=["#10b981","#3b82f6","#a855f7","#f97316","#eab308","#06b6d4","#ec4899","#6b7280"],T=n.reduce((s,t)=>s+(t.amount||0),0),o=s=>`৳${Math.abs(s??0).toLocaleString("en-US",{maximumFractionDigits:0})}`,p=b.useMemo(()=>{const s=a.totalReceiving||0,t=a.totalOwed||0;if(s===0&&t===0||t===0)return 100;const l=s/(s+t);return Math.round(l*100)},[a.totalReceiving,a.totalOwed]),x=p>=70?"excellent":p>=40?"good":"needs-attention",R=b.useMemo(()=>{const s=[];return a.totalOwed>0&&s.push({type:"warning",icon:G,message:`You owe ${o(a.totalOwed)} across groups`,action:"Review debts",onClick:()=>r("groups")}),a.totalReceiving>a.totalOwed&&s.push({type:"success",icon:B,message:`Net positive: ${o(a.totalReceiving-a.totalOwed)} in your favor`,action:"View details",onClick:()=>r("friends")}),a.totalGroups===0&&s.push({type:"info",icon:j,message:"Create your first group to start splitting expenses",action:"Create group",onClick:()=>r("groups")}),s.slice(0,3)},[a,r]);function O(){const s=["Metric","Value"],t=[["Total Groups",a.totalGroups],["Total Friends",a.totalFriends],["Total Expenses",a.totalExpenses],["Total Balance",`৳${a.totalBalance.toFixed(2)}`],["Total Owed",`৳${a.totalOwed.toFixed(2)}`],["Total Receiving",`৳${a.totalReceiving.toFixed(2)}`],["",""],["Category","Amount","Count"],...Object.values(A).map(c=>[k(c.category).label,`৳${c.amount.toFixed(2)}`,c.count])],l=[s,...t].map(c=>c.map(F=>`"${F}"`).join(",")).join(`
`),m=new Blob([l],{type:"text/csv"}),g=window.URL.createObjectURL(m),i=document.createElement("a");i.href=g,i.download=`dashboard-${new Date().toISOString().split("T")[0]}.csv`,i.click(),window.URL.revokeObjectURL(g)}return e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8 pb-16",children:[e.jsxs("section",{className:"rounded-[32px] bg-gradient-to-br from-slate-900 via-emerald-950 to-slate-900 p-8 text-white",children:[e.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row lg:items-start lg:justify-between",children:[e.jsxs("div",{className:"space-y-4 flex-1",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.5em] text-emerald-300/80",children:"Financial Overview"}),e.jsx("h1",{className:"mt-2 text-3xl lg:text-4xl font-bold",children:"Your Money at a Glance"}),e.jsx("p",{className:"mt-2 text-white/60 max-w-xl",children:"Track balances, monitor group expenses, and stay on top of who owes what."})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs(N,{className:"rounded-full bg-white text-gray-900 hover:bg-white/90",onClick:()=>r("expenses"),children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),"Add Expense"]}),e.jsxs(N,{variant:"outline",className:"rounded-full border-white/30 text-white hover:bg-white/10",onClick:O,children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),"Export"]})]})]}),e.jsx("div",{className:"w-full max-w-xs",children:e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 backdrop-blur p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-sm text-white/60",children:"Financial Health"}),e.jsx("div",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${x==="excellent"?"bg-emerald-500/20 text-emerald-300":x==="good"?"bg-amber-500/20 text-amber-300":"bg-red-500/20 text-red-300"}`,children:x==="excellent"?"Excellent":x==="good"?"Good":"Review"})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("span",{className:"text-4xl font-bold",children:p}),e.jsx("span",{className:"text-white/60 mb-1",children:"/100"})]}),e.jsx("div",{className:"mt-3 h-2 bg-white/10 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all ${x==="excellent"?"bg-emerald-400":x==="good"?"bg-amber-400":"bg-red-400"}`,style:{width:`${p}%`}})})]})})]}),e.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"Net Balance",value:o(a.totalBalance),positive:a.totalBalance>=0},{label:"You Are Owed",value:o(a.totalReceiving),positive:!0},{label:"You Owe",value:o(a.totalOwed),positive:!1},{label:"This Month",value:o(a.monthlyTotal),positive:!0}].map(s=>e.jsxs("div",{className:"rounded-xl bg-white/5 border border-white/10 p-4",children:[e.jsx("p",{className:"text-xs text-white/50 uppercase tracking-wide",children:s.label}),e.jsx("p",{className:`mt-1 text-2xl font-semibold ${s.positive?"text-emerald-300":"text-white"}`,children:s.value})]},s.label))})]}),R.length>0&&e.jsx("section",{className:"grid gap-4 md:grid-cols-3",children:R.map((s,t)=>{const l=s.icon;return e.jsx("button",{onClick:s.onClick,className:`rounded-2xl p-4 text-left transition-all hover:scale-[1.02] ${s.type==="warning"?"bg-amber-50 border border-amber-200 hover:border-amber-300":s.type==="success"?"bg-emerald-50 border border-emerald-200 hover:border-emerald-300":"bg-blue-50 border border-blue-200 hover:border-blue-300"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-xl ${s.type==="warning"?"bg-amber-100":s.type==="success"?"bg-emerald-100":"bg-blue-100"}`,children:e.jsx(l,{className:`h-5 w-5 ${s.type==="warning"?"text-amber-600":s.type==="success"?"text-emerald-600":"text-blue-600"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.message}),e.jsxs("p",{className:`text-xs mt-1 ${s.type==="warning"?"text-amber-600":s.type==="success"?"text-emerald-600":"text-blue-600"}`,children:[s.action," →"]})]})]})},t)})}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsx(y,{className:"rounded-2xl border border-gray-200 shadow-sm",children:e.jsxs(f,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Spending by Category"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Based on recent activity"})]}),e.jsx(L,{className:"h-5 w-5 text-gray-400"})]}),h.length>0?e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"relative h-40 w-40 flex-shrink-0",children:[e.jsx(S,{width:"100%",height:"100%",children:e.jsx(U,{children:e.jsx(P,{data:h,cx:"50%",cy:"50%",innerRadius:50,outerRadius:70,dataKey:"value",strokeWidth:0,children:h.map((s,t)=>e.jsx(I,{fill:u[t%u.length]},`cell-${t}`))})})}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Total"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:o(T)})]})]}),e.jsx("div",{className:"flex-1 space-y-2",children:h.slice(0,5).map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:u[t%u.length]}}),e.jsx("span",{className:"text-sm text-gray-600",children:s.name})]}),e.jsx("span",{className:"text-sm font-medium",children:o(s.value)})]},s.name))})]}):e.jsx("div",{className:"h-40 flex items-center justify-center text-gray-500 text-sm",children:"No spending data yet"})]})}),e.jsx(y,{className:"rounded-2xl border border-gray-200 shadow-sm",children:e.jsxs(f,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Weekly Activity"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Spending pattern this week"})]}),e.jsx(X,{className:"h-5 w-5 text-gray-400"})]}),e.jsx("div",{className:"h-40",children:e.jsx(S,{width:"100%",height:"100%",children:e.jsxs(Y,{data:$,children:[e.jsx(V,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:12}}),e.jsx(W,{hide:!0}),e.jsx(K,{formatter:s=>[`৳${s}`,"Spent"],contentStyle:{borderRadius:"8px",border:"1px solid #e5e7eb"}}),e.jsx(z,{dataKey:"amount",fill:"#10b981",radius:[4,4,0,0]})]})})})]})})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1fr_1.2fr]",children:[e.jsx(y,{className:"rounded-2xl border border-gray-200 shadow-sm",children:e.jsxs(f,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsx("div",{className:"space-y-3",children:[{icon:C,label:"Add Personal Expense",desc:"Track your spending",onClick:()=>r("expenses")},{icon:j,label:"View Groups",desc:"Manage shared expenses",onClick:()=>r("groups")},{icon:E,label:"Friend Balances",desc:"See who owes what",onClick:()=>r("friends")},{icon:D,label:"Activity Feed",desc:"Recent transactions",onClick:()=>r("activity")}].map(s=>e.jsxs("button",{onClick:s.onClick,className:"w-full flex items-center gap-3 p-3 rounded-xl border border-gray-100 hover:border-emerald-300 hover:bg-emerald-50/50 transition-all text-left",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gray-100",children:e.jsx(s.icon,{className:"h-4 w-4 text-gray-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.label}),e.jsx("p",{className:"text-xs text-gray-500",children:s.desc})]}),e.jsx(H,{className:"h-4 w-4 text-gray-400"})]},s.label))})]})}),e.jsx(y,{className:"rounded-2xl border border-gray-200 shadow-sm",children:e.jsxs(f,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Recent Activity"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[n.length," recent entries"]})]}),e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>r("activity"),children:"View all"})]}),n.length===0?e.jsx("div",{className:"py-8 text-center text-gray-500 text-sm",children:"No recent activity. Start by adding an expense!"}):e.jsx("div",{className:"space-y-3",children:n.slice(0,5).map((s,t)=>{const m=k(s.category||"other").icon;return e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-gray-50",children:[e.jsx("div",{className:"p-2 rounded-lg bg-white",children:e.jsx(m,{className:"h-4 w-4 text-gray-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.description||"Expense"}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.groupName||"Personal"," • ",new Date(s.createdAt).toLocaleDateString()]})]}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["৳",(s.amount||0).toFixed(0)]})]},s.id||t)})})]})})]}),e.jsx("section",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{icon:j,label:"Active Groups",value:a.totalGroups,color:"emerald"},{icon:j,label:"Friends",value:a.totalFriends,color:"blue"},{icon:C,label:"Personal Expenses",value:a.personalExpensesCount,color:"purple"},{icon:Q,label:"Total Transactions",value:a.totalExpenses,color:"orange"}].map(s=>e.jsxs("div",{className:`rounded-2xl border p-4 bg-${s.color}-50 border-${s.color}-100`,children:[e.jsx(s.icon,{className:`h-5 w-5 text-${s.color}-600 mb-2`}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.value}),e.jsx("p",{className:"text-sm text-gray-600",children:s.label})]},s.label))})]})}function v({className:d=""}){return e.jsx("div",{className:`animate-pulse bg-gray-200 rounded ${d}`})}function w(){return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(v,{className:"h-10 w-10 rounded-full"}),e.jsx(v,{className:"h-4 w-24"})]}),e.jsx(v,{className:"h-8 w-32 mb-1"}),e.jsx(v,{className:"h-3 w-20"})]})}function re({stats:d,loading:r,onNavigate:a}){return r?e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"h-8 w-48 bg-gray-200 animate-pulse rounded mb-2"}),e.jsx("div",{className:"h-4 w-64 bg-gray-200 animate-pulse rounded"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(w,{}),e.jsx(w,{}),e.jsx(w,{}),e.jsx(w,{})]}),e.jsx("div",{className:"border border-gray-200 rounded-lg p-6 shadow-sm",children:e.jsx("div",{className:"h-64 bg-gray-200 animate-pulse rounded"})})]}):d?e.jsx(_,{stats:d,onNavigate:a}):e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No data available"})}export{re as DashboardPage};
